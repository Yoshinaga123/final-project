/* =============================================================
	 Global App Styles (Restored Rich UI)
	 - Design tokens (light/dark ready via CSS variables)
	 - Layout utilities
	 - Components: hero, feature cards, dashboard panels, tables
	 - Animations & transitions
	 - Responsive helpers
	 ============================================================= */

:root {
	/* Color System */
	--c-bg: #ffffff;
	--c-bg-alt: #f7f9fc;
	--c-surface: #ffffff;
	--c-border: #e3e7ef;
	--c-divider: #d8dee6;
	--c-text: #1f242b;
	--c-text-soft: #5b6675;
	--c-primary: #0d6efd;
	--c-primary-rgb: 13,110,253;
	--c-primary-soft: #e3f0ff;
	--c-secondary: #6c757d;
	--c-success: #198754;
	--c-warning: #ffc107;
	--c-danger: #dc3545;
	--c-info: #0dcaf0;
	--c-accent: #845ef7;
	--c-shadow: rgba(0,0,0,.08);
	--radius-sm: 4px;
	--radius: 10px;
	--radius-lg: 16px;
	--transition: .25s cubic-bezier(.4,0,.2,1);
	--shadow-sm: 0 2px 4px rgba(0,0,0,.04), 0 1px 2px rgba(0,0,0,.06);
	--shadow: 0 4px 14px rgba(0,0,0,.08);
	--shadow-hover: 0 8px 28px rgba(0,0,0,.12);
	--gradient-primary: linear-gradient(135deg, #0d6efd 0%, #845ef7 100%);
	--gradient-hero: linear-gradient(135deg, rgba(13,110,253,.12), rgba(32,201,151,.12));
}

html.theme-dark, body.theme-dark {
	--c-bg: #0f1115;
	--c-bg-alt: #171b21;
	--c-surface: #1e242c;
	--c-border: #2b323b;
	--c-divider: #2f3741;
	--c-text: #f5f6f7;
	--c-text-soft: #b1bcc8;
	--c-primary-soft: rgba(13,110,253,.15);
	--c-shadow: rgba(0,0,0,.55);
	--shadow-sm: 0 2px 4px rgba(0,0,0,.55);
	--shadow: 0 4px 18px rgba(0,0,0,.5);
	--shadow-hover: 0 10px 32px rgba(0,0,0,.65);
	--gradient-hero: linear-gradient(135deg, rgba(13,110,253,.25), rgba(32,201,151,.25));
}

/* Base Typography / Reset Enhancements */
body {
	background: var(--c-bg);
	color: var(--c-text);
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
}

a { transition: color var(--transition), background-color var(--transition), opacity var(--transition); }
a:hover { text-decoration: none; }

hr { border-top: 1px solid var(--c-divider); opacity: 1; }

/* Utility Spacing Extensions */
.mt-6 { margin-top: 4rem !important; }
.mb-6 { margin-bottom: 4rem !important; }
.pt-6 { padding-top: 4rem !important; }
.pb-6 { padding-bottom: 4rem !important; }
.gap-2_5 { gap: .75rem !important; }

/* Layout Helpers */
.content-narrow { max-width: 840px; margin-inline: auto; }
.surface { background: var(--c-surface); border: 1px solid var(--c-border); border-radius: var(--radius); box-shadow: var(--shadow-sm); }
.surface-raised { box-shadow: var(--shadow); }

/* Hero Section */
.hero {
	position: relative;
	background: var(--gradient-hero);
	border: 1px solid var(--c-border);
	border-radius: var(--radius-lg);
	overflow: hidden;
	backdrop-filter: blur(3px);
	box-shadow: var(--shadow);
}
.hero:before {
	content: '';
	position: absolute;
	inset: 0;
	background: radial-gradient(circle at 70% 30%, rgba(255,255,255,.35), transparent 60%);
	mix-blend-mode: overlay;
	pointer-events: none;
	opacity: .5;
}
html.theme-dark .hero:before { opacity: .15; }

.hero h1 { letter-spacing: -0.5px; }
.hero .lead { font-size: 1.05rem; max-width: 640px; }

/* Feature Cards */
.feature-card { transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition); border: 1px solid var(--c-border) !important; }
.feature-card:hover { transform: translateY(-6px); box-shadow: var(--shadow-hover); border-color: var(--c-primary) !important; }
.feature-card .card-title { font-weight: 600; }
.feature-card .card-text { font-size: .9rem; line-height: 1.45; }

/* Icon Circle */
.icon-circle { width: 52px; height: 52px; border-radius: 50%; display:flex; justify-content:center; align-items:center; font-size:1.35rem; box-shadow: inset 0 0 0 1px rgba(var(--c-primary-rgb), .25), 0 2px 4px rgba(0,0,0,.06); backdrop-filter: blur(2px); }
html.theme-dark .icon-circle { box-shadow: inset 0 0 0 1px rgba(255,255,255,.15), 0 2px 6px rgba(0,0,0,.5); }

/* Dashboard / Panel Sections */
.panel-section { padding: 1.75rem 1.5rem; border: 1px solid var(--c-border); border-radius: var(--radius); background: var(--c-surface); position: relative; }
.panel-section + .panel-section { margin-top: 1.25rem; }
.panel-section h2, .panel-section h3 { font-size: 1.05rem; text-transform: uppercase; letter-spacing:.5px; font-weight:600; margin-bottom:1rem; color: var(--c-text-soft); }
html.theme-dark .panel-section h2, html.theme-dark .panel-section h3 { color: var(--c-text-soft); }

/* Table Enhancements */
.table thead th { font-size: .72rem; letter-spacing: .5px; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid var(--c-border) !important; }
.table-hover tbody tr { transition: background-color var(--transition), color var(--transition); }
.table-hover tbody tr:hover { background: var(--c-primary-soft) !important; }
html.theme-dark .table-hover tbody tr:hover { background: rgba(255,255,255,.06) !important; }

/* Buttons Refinement */
.btn { font-weight: 500; letter-spacing: .2px; }
.btn-primary { background: var(--c-primary); border-color: var(--c-primary); }
.btn-outline-primary { border-width:2px; }
.btn-soft-primary { background: var(--c-primary-soft); color: var(--c-primary); border:1px solid rgba(var(--c-primary-rgb), .3); }
html.theme-dark .btn-soft-primary { background: rgba(13,110,253,.15); color:#d2e6ff; }

/* Animations */
@keyframes fadeInUp { from { opacity:0; transform: translateY(14px);} to { opacity:1; transform: translateY(0);} }
.animate-fadeInUp { animation: fadeInUp .6s var(--transition) both; }

/* Cards general */
.card { background: var(--c-surface); border-color: var(--c-border); }
html.theme-dark .card { background: var(--c-surface); }

/* Footer */
footer.footer { border-top: 1px solid var(--c-border); }
html.theme-dark footer.footer { background:#0f1115 !important; }

/* Forms */
.form-control, .form-select { background: var(--c-bg-alt); border-color: var(--c-border); }
.form-control:focus, .form-select:focus { border-color: var(--c-primary); box-shadow: 0 0 0 .25rem rgba(var(--c-primary-rgb), .25); background: var(--c-surface); }
html.theme-dark .form-control, html.theme-dark .form-select { background: #222a33; }
html.theme-dark .form-control:focus, html.theme-dark .form-select:focus { background:#27323e; }

/* Alerts */
.alert { border-width:1px; }
html.theme-dark .alert-success { background:#11311f; color:#d1f7e1; border-color:#1f5d38; }
html.theme-dark .alert-danger { background:#3a1014; color:#ffd7db; border-color:#742028; }
html.theme-dark .alert-info { background:#08313a; color:#c5f3ff; border-color:#13647a; }

/* Badges */
.badge { font-weight:500; letter-spacing:.3px; }

/* Shadows Utility */
.shadow-raise { box-shadow: var(--shadow); }
.shadow-raise-hover { transition: box-shadow var(--transition), transform var(--transition); }
.shadow-raise-hover:hover { box-shadow: var(--shadow-hover); transform: translateY(-4px); }

/* Grid / Responsive helpers */
@media (max-width: 767.98px) {
	.hero { padding: 1.75rem !important; }
	.feature-card { margin-bottom: 1rem; }
}

/* Dark mode forced text adjustments (fallback if inline conflict) */
html.theme-dark .text-muted { color: var(--c-text-soft) !important; }

/* Transition smoothing for theme swap */
html.theme-dark body, body.theme-dark * { transition: background-color .35s ease, color .35s ease, border-color .35s ease; }

/* Move inline index styles here (backward compatibility) */
.index-page .hero { border-radius: var(--radius-lg); }

/* Loading polish (paired with base.html script adding .loaded) */
html { scroll-behavior: smooth; }

/* Optional: subtle scrollbar styling */
::-webkit-scrollbar { width: 10px; }
::-webkit-scrollbar-track { background: var(--c-bg); }
::-webkit-scrollbar-thumb { background: var(--c-border); border-radius: 40px; }
::-webkit-scrollbar-thumb:hover { background: var(--c-text-soft); }

/* End of restored rich UI stylesheet */

/* =============================================
   Kifu (Game Record) Table Accessibility Tweaks
   - Improve contrast of striped rows (light + dark)
   - Preserve existing hover highlight
   - Avoid overpowering background while clearly separating rows
   ============================================= */
.kifu-table { border-collapse: separate; border-spacing: 0; }
.kifu-table tbody tr { transition: background-color var(--transition), color var(--transition); }
.kifu-table.table-striped > tbody > tr:nth-of-type(odd) {
	background-color: var(--c-bg-alt) !important; /* higher contrast than default rgba stripe */
}
html.theme-dark .kifu-table.table-striped > tbody > tr:nth-of-type(odd) {
	background-color: #242c34 !important; /* dark alt surface */
}
.kifu-table td, .kifu-table th { vertical-align: middle; }
.kifu-table td:first-child { font-weight: 500; }
.kifu-table tbody tr + tr td { border-top: 1px solid var(--c-border); }
html.theme-dark .kifu-table tbody tr + tr td { border-top: 1px solid var(--c-divider); }
.kifu-table.table-hover tbody tr:hover { background: var(--c-primary-soft) !important; }
html.theme-dark .kifu-table.table-hover tbody tr:hover { background: rgba(255,255,255,.08) !important; }


